import CJS_COMPAT_NODE_URL_6hvzzbowbfk from 'node:url';
import CJS_COMPAT_NODE_PATH_6hvzzbowbfk from 'node:path';
import CJS_COMPAT_NODE_MODULE_6hvzzbowbfk from "node:module";

var __filename = CJS_COMPAT_NODE_URL_6hvzzbowbfk.fileURLToPath(import.meta.url);
var __dirname = CJS_COMPAT_NODE_PATH_6hvzzbowbfk.dirname(__filename);
var require = CJS_COMPAT_NODE_MODULE_6hvzzbowbfk.createRequire(import.meta.url);

// ------------------------------------------------------------
// end of CJS compatibility banner, injected by Storybook's esbuild configuration
// ------------------------------------------------------------

// src/preset.ts
import { telemetry } from "storybook/internal/telemetry";

// package.json
var version = "10.2.7";

// src/constants.ts
var ADDON_ID = "storybook/onboarding", ADDON_ONBOARDING_CHANNEL = `${ADDON_ID}/channel`;

// src/preset.ts
var experimental_serverChannel = async (channel, options) => {
  let { disableTelemetry } = await options.presets.apply("core", {});
  return disableTelemetry || channel.on(ADDON_ONBOARDING_CHANNEL, ({ type, ...event }) => {
    type === "telemetry" ? telemetry("addon-onboarding", { ...event, addonVersion: version }) : type === "survey" && telemetry("onboarding-survey", { ...event, addonVersion: version });
  }), channel;
};
export {
  experimental_serverChannel
};
